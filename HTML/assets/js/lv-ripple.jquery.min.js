/*!
* Author: Antonio Dal Sie
* Name: lv-ripple
* Description: Material ripple effects
*/
!function(e){var t=function(){function i(){n.enable=e("ripple, *[ripple], .ripple").toArray()}function a(e,n){var t=e.indexOf(n);return t>-1&&delete e[t],o(e)}function o(e){return e.filter(function(e){return void 0!=e})}function l(){e(n.enable).each(function(t,r){delete n.enable[t],e(r).trigger("r-destroy")}),n.enable=o(n.enable)}function s(){e(n.enable).each(function(t,r){delete n.enable[t],e(r).trigger("r-disable"),n.disable.push(r)}),n.enable=o(n.enable)}function u(){e(n.disable).each(function(t,r){delete n.disable[t],e(r).trigger("r-enable"),n.enable.push(r)}),n.disable=o(n.disable)}function c(){e(n.enable).each(function(n,t){e(t).trigger("r-update")})}function d(t){n.enable=a(n.enable,e(t)[0]),e(t).trigger("r-destroy")}function f(t){n.enable=a(n.enable,e(t)[0]),e(t).trigger("r-disable"),n.disable.push(e(t)[0])}function p(t){n.disable=a(n.disable,e(t)[0]),e(t).trigger("r-enable"),n.enable.push(e(t)[0])}function v(n){e(n).trigger("r-update")}function b(n){var t=e(n).html(),r=e("<button></button>"),i=e(n).hasClass("r-overink");if(i){r=e("<div></div>");var a=e("<button></button>")}if("ripple"!=e(n).prop("nodeName").toLowerCase()){var o=e(n).clone();e(o).empty(),e(o).removeClass("ripple"),e(o).removeAttr("ripple"),e(o).removeAttr("data-ripple"),e(o).removeAttr("lv-ripple"),i?a=e(o):r=e(o)}return r.addClass("ripple-cont"),i?(a.addClass("ripple-content"),a.html(t),r.append(a)):r.append("<div class='ripple-content'>"+t+"</div>"),r.append("<div class='ink-content'></div>"),r[0].outerHTML}function m(){e(n.enable).each(function(t,r){var i=b(r),a=e.now();i=e(i),i.addClass("ripple-idm-"+a),e(r).after(i).remove(),i=e(".ripple-idm-"+a),i.removeClass("ripple-idm-"+a),n.enable[t]=i[0],y(i[0],t)})}function g(t){if(e(t).length<=1){var r=b(t),i=e.now();r=e(r),r.addClass("ripple-idm-"+i),e(t).after(r).remove(),r=e(".ripple-idm-"+i),r.removeClass("ripple-idm-"+i);var a=n.enable.push(r[0]);return y(r[0],a)}e(t).each(function(e,n){return g(n)})}function y(i,o){function g(){f=l.hasClass("r-icon"),p=l.hasClass("r-overink"),u="undefined"!=typeof i.attributes["r-light"],c="undefined"!=typeof i.attributes["r-color"]?i.attributes["r-color"].nodeValue:!1,d="undefined"!=typeof i.attributes["r-opacity"]?i.attributes["r-opacity"].nodeValue:null,v="undefined"!=typeof i.attributes["r-prevent"]?i.attributes["r-prevent"].nodeValue:!1}function y(n){function F(){var e=(I-T)/100*10;D=setInterval(function(){I>T?(T+=e,k.css({height:P+T,width:P+T})):clearInterval(D)},50)}function S(){e(window).bind(m.end+" blur",L),l.bind("mouseleave",L)}function L(){e(window).unbind(m.end+" blur",L),l.unbind("mouseleave",L),clearInterval(D),clearInterval(b),clearInterval(h);var n=I>=T?r.rippleDelay:1;T=I>T?I:T,k.css({height:P+T,width:P+T}),setTimeout(function(){C.css({opacity:0}),k.hasClass("new")&&!f&&s.css("background-color",""),setTimeout(function(){k.remove(),p&&!s.find(".ink").length&&s.hide(0)},550)},n)}var a=n.timeStamp;if(0==a){var g=new Date;a=g.getTime()}if(l.hasClass("r-childprevent"))return l.removeClass("r-childprevent");if(l.parents(".ripple-cont").addClass("r-childprevent"),-1==t[o].indexOf(n.timeStamp)){t[o].push(n.timeStamp);var y=e(n.target);if("undefined"==typeof i.attributes["r-disabled"]&&!l.hasClass("disabled")&&!(y.hasClass("r-noink")||y.parents(".r-noink").length||v&&l.is(v))){p&&s.show(0);var k=e("<div class='ink'><i></i></div>"),C=k.find("i"),T=0,I=0;s.find(".ink").removeClass("new"),k.addClass("new"),s.prepend(k);var E="touchstart"!=n.type?n.pageX-s.offset().left:n.originalEvent.touches[0].pageX-s.offset().left,A="touchstart"!=n.type?n.pageY-s.offset().top:n.originalEvent.touches[0].pageY-s.offset().top;f?(E=0,A=0):(k.css({top:A+"px",left:E+"px"}),E=E>s.outerWidth()/2?E-s.outerWidth()/2:s.outerWidth()/2-E,A=A>s.outerHeight()/2?A-s.outerHeight()/2:s.outerHeight()/2-A);var x=2*E+2*A,H=s.outerHeight(),O=s.outerWidth(),P=Math.sqrt(O*O+H*H),I=x;I=f?0:I,k.css({height:P,width:P}),C.css("opacity",0);var V=d||r.rippleOpacity;if(c?C.css("background-color",c):u&&C.css("background-color","rgb(255,255,255)"),!f)if(s.css("background-color","rgba(0,0,0,0.098)"),c){var W=w(c);s.css("background-color","rgba("+W.r+","+W.g+","+W.b+",0.098)")}else u&&s.css("background-color","rgba(255,255,255,0.098)");setTimeout(function(){k.addClass("animate")},1),C.css({opacity:V});var D=null;F(),"mousedown"==n.type&&1!==n.which?setTimeout(function(){L()},100):"click"==n.type?setTimeout(function(){L()},300):"touchstart"==n.type?(b=setTimeout(function(){L()},1e3),e(window).bind("scroll",forceRemoveInk),h=setTimeout(function(){e(window).unbind("scroll",forceRemoveInk)},500),S()):S()}}}function k(){n.enable=a(n.enable,e(l)[0]),l.children(".ink-content").remove();var t=l.find(".ripple-content").html();l.find(".ripple-content").remove(),l.append(t),l.removeClass("ripple-cont"),l.unbind("mousedown touchstart",y)}function C(){n.enable=a(n.enable,e(l)[0]),l.unbind("mousedown touchstart",y),n.disable.push(e(l)[0])}function T(){n.disable=a(n.disable,e(l)[0]),l.bind("mousedown touchstart",y),n.enable.push(e(l)[0])}var l=null,s=null,u=!1,c=!1,d=null,f=!1,p=!1,v=!1,o=o,b=null,h=null;l=e(i),i=l[0],"undefined"!=typeof PointerEventsPolyfill&&PointerEventsPolyfill.initialize({selector:l,mouseEvents:["click","dblclick"]});var m={start:"ontouchstart"in document.documentElement?r.mobileTouch?"touchstart":"click":"mousedown",end:"ontouchend"in document.documentElement?"touchend":"mouseup"};return t[o]=[],l.on("r-destroy",function(){l.children(".ink-content").remove();var e=l.find(".ripple-content").html();l.find(".ripple-content").remove(),l.append(e),l.removeClass("ripple-cont"),l.unbind(m.start,y)}),l.on("r-disable",function(){l.unbind(m.start,y)}),l.on("r-enable",function(){l.bind(m.start,y)}),l.on("r-update",function(){g()}),l.removeClass("ripple"),s=l.children(".ink-content"),g(),l.bind(m.start,y),{element:l,destroy:k,disable:C,enable:T,update:g}}function w(e){var n=/^#([\da-fA-F]{2})([\da-fA-F]{2})([\da-fA-F]{2})$/,t=n.exec(e);return{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}}function k(n){n?E(n):e.noop(),i(),m()}function C(e){return g(e?e:this)}function T(){return n}function I(){return t}function E(n){e.extend(r,n)}function A(e){switch(e){case"enable":p(this);break;case"disable":f(this);break;case"destroy":d(this);break;case"update":v(this);break;default:return C(this)}}var n={enable:[],disable:[]},t=[],r={rippleOpacity:.2,rippleDelay:100,mobileTouch:!1};return{init:k,initElement:C,list:T,eventHistory:I,config:E,destroy:l,disable:s,enable:u,update:c,"switch":A}}();e.ripple=t,e.fn.ripple=t.switch}(jQuery,window);